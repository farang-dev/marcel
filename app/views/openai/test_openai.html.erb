<h1>Test OpenAI</h1>
<%= form_with(url: test_openai_path, method: :post, data: { remote: true }) do |form| %>
  <!-- Add the dropdown menus and text inputs -->
  <div>
    <%= form.label "To: " %>
    <%= form.select :to, ['colleague', 'manager', 'friend', 'family'] %>
  </div>
  <div>
    <%= form.label "Platform: " %>
    <%= form.select :platform, ['email', 'LinkedIn', 'Instagram', 'Whatsapp'] %>
  </div>
  <div>
    <%= form.label "Tone: " %>
    <%= form.select :tone, ['formal', 'neutral', 'professional', 'friendly'] %>
  </div>
  <div>
    <%= form.label "Length: " %>
    <%= form.select :length, ['in detail(long)', 'medium', 'short', 'very short'] %>
  </div>
  <div>
    <%= form.label "Who: " %>
    <%= form.text_field :who, value: "Receiver's name" %>
  </div>
  <div>
    <%= form.label "I want to say: " %>
    <%= form.text_area :message, value: "ãƒ»Write what to say" %>
  </div>
  <%= form.submit "Ask OpenAI" %>
<% end %>
<!-- Display the response -->
<% if @response.present? %>
  <div id="openai-response">
    <h3>Response:</h3>
    <p class="response-message"><%= @response %></p>
    <button onclick="copyResponseToClipboard()">Copy Response</button>
  </div>
<% end %>
<!-- Add the JavaScript code -->
<script>
  function copyResponseToClipboard() {
    const responseElement = document.querySelector(".response-message");
    const responseText = responseElement.textContent.trim();

    const textArea = document.createElement("textarea");
    textArea.value = responseText;
    document.body.appendChild(textArea);

    textArea.select();
    document.execCommand("copy");
    document.body.removeChild(textArea);

    alert("Response copied to clipboard!");
  }
</script>
